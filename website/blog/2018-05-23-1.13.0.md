---
author: Lucas Duailibe (@duailibe)
authorURL: https://twitter.com/duailibe
title: "Prettier 1.13: "
---

This releases features a lot of formatting fixes and changes.

<!--truncate-->

## Highlights

### API/CLI

#### Don't default parser to babylon ([#4528](https://github.com/prettier/prettier/pull/4528) by [@duailibe](https://github.com/duailibe))

Until 1.13, when running `prettier file`, Prettier would assume JavaScript and always use the Babylon parser. This lead to a lot of bugs of formatting unwanted files (like files in `.git/`) or incorrectly format HTML files because it parsed them as JSX. In 1.13 we now change this behavior, if no parser is specified or can't be inferred from the file extension, it will skip formatting the file.

When invoking from the CLI, you'll have to pass `--parser` for paths without extensions or unsupported extensions, if you still want them formatted. When reading from standard input, the path is passed with `--stdin-filepath`.

When using the API, `prettier.format(text, { options })` will throw an error if either `parser` or `filepath` are specified; it will also throw an error if no `parser` is specified, `filepath` is specified but no parser can be inferred from the path extension.

#### prettier.getFileInfo() method and --file-info CLI option ([#4341](https://github.com/prettier/prettier/pull/4341) by [@kachkaev](https://github.com/kachkaev))

When invoking Prettier from the API, there was no way to find out if a file should be ignored or not (for `.prettierignore`) so editor integration plugins would have to implement this logic. Also, there was no way to find out if a file is supported by Prettier, so users would need to call Prettier anyway. Now in 1.13 there's a way to check if a parser will be inferred (and which one) and if the file is ignored or not before actually calling `format`.

You can read more about it in the [docs](https://prettier.io/docs/en/api.html#prettiergetfileinfofilepath-options).

### JavaScript

#### Inline AngularJS tests that use `inject` ([#4495](https://github.com/prettier/prettier/pull/4495) by [@thorn0](https://github.com/thorn0))

Prettier will now keep AngularJS tests with dependency injection in a single line, like it does for our other tests.

<!-- prettier-ignore -->
```js
// Input:
it("has calculated the answer correctly", inject(function(DeepThought) {
  expect(DeepThought.answer).toBe(42);
}));

// Output with Prettier 1.12.1:
it(
  "has calculated the answer correctly",
  inject(function(DeepThought) {
    expect(DeepThought.answer).toBe(42);
  })
);

// Output with Prettier 1.13:
it("has calculated the answer correctly", inject(function(DeepThought) {
  expect(DeepThought.answer).toBe(42);
}));
```

#### Nicer line wrapping for d3 ([#4285](https://github.com/prettier/prettier/pull/4285) by [@1wheel](https://github.com/1wheel), [#4505](https://github.com/prettier/prettier/pull/4505) by [@duailibe](https://github.com/duailibe))

In Prettier 1.12 chains that started with `d3` and other short names were broken in too many lines. Prettier 1.13 will now detect if the first member of the chain is a short identifier and prevent breaking.

<!-- prettier-ignore -->
```js
// Input
d3.select('body')
  .append('circle')
  .at({ width: 30, fill: '#f0f' })
  .st({ fontWeight: 600 })

// Output with Prettier 1.12.1:
d3
  .select("body")
  .append("circle")
  .at({ width: 30, fill: "#f0f" })
  .st({ fontWeight: 600 });

// Output with Prettier 1.13:
d3.select("body")
  .append("circle")
  .at({ width: 30, fill: "#f0f" })
  .st({ fontWeight: 600 });
```

#### Support jest-each template string ([#4423](https://github.com/prettier/prettier/pull/4423) by [@ikatyang](https://github.com/ikatyang))

With the recent addition of support for [data driven tests](https://github.com/facebook/jest/pull/6102) in Jest (to be released), Prettier will format the matrix!

<!-- prettier-ignore -->
```js
// Input
describe.each`
a|b|expected
${11   } | ${  1  }|${222}
${1-1}|${2+2}|${ 3333}
${2+1+2}|${1111}|${3}
`('$a + $b', ({a, b, expected}) => {
  test(`returns ${expected}`, () => {
    expect(a + b).toBe(expected);
  });

  test(`returned value not be greater than ${expected}`, () => {
    expect(a + b).not.toBeGreaterThan(expected);
  });

  test(`returned value not be less than ${expected}`, () => {
    expect(a + b).not.toBeLessThan(expected);
  });
});

// Output with Prettier 1.13
describe.each`
  a            | b        | expected
  ${11}        | ${1}     | ${222}
  ${1 - 1}     | ${2 + 2} | ${3333}
  ${2 + 1 + 2} | ${1111}  | ${3}
`("$a + $b", ({ a, b, expected }) => {
  test(`returns ${expected}`, () => {
    expect(a + b).toBe(expected);
  });

  test(`returned value not be greater than ${expected}`, () => {
    expect(a + b).not.toBeGreaterThan(expected);
  });

  test(`returned value not be less than ${expected}`, () => {
    expect(a + b).not.toBeLessThan(expected);
  });
});
```

#### Format functional composition more nicely ([#4431](https://github.com/prettier/prettier/pull/4431) by[@suchipi](https://github.com/suchipi))

One of the most requested changes in Prettier was to format composition of functions as seen a lot in FP style code. In 1.13 Prettier now has an heuristic to detect this type of function composition and format them in broken lines.

<!-- prettier-ignore -->
```js
// Input
compose(
  sortBy(x => x),
  flatten,
  map(x => [x, x * 2])
);

pipe(
  filter(x => x % 2 === 0),
  map(x => x + x),
  scan((acc, x) => acc + x, 0)
);

// Output with Prettier 1.12.1
compose(sortBy(x => x), flatten, map(x => [x, x * 2]));

pipe(filter(x => x % 2 === 0), map(x => x + x), scan((acc, x) => acc + x, 0));

// Output with Prettier 1.13
compose(
  sortBy(x => x),
  flatten,
  map(x => [x, x * 2])
);

pipe(
  filter(x => x % 2 === 0),
  map(x => x + x),
  scan((acc, x) => acc + x, 0)
);
```

#### Keep parens around do-expressions when needed and improve formatting ([#4479](https://github.com/prettier/prettier/pull/4479) by [@existentialism](https://github.com/existentialism))

Prettier 1.12 would remove parens around do-expressions in some cases that would print invalid code. Those cases are now fixed in 1.13. It also improves formatting of do-expressions.

<!-- prettier-ignore -->
```js
// Input
(do {});
(do {} + 1);
(1 + do {});

() => do {
  var obj = { foo: "bar", bar: "foo" };
  for (var key in obj) {
    obj[key];
  }
};

// Output with Prettier 1.12
do {
};
do {
} + 1;
1 +
  do {
  };

() =>
  do {
    var obj = { foo: "bar", bar: "foo" };
    for (var key in obj) {
      obj[key];
    }
  };

// Output with Prettier 1.13
(do {});
(do {} + 1);
1 + do {};

() => do {
  var obj = { foo: "bar", bar: "foo" };
  for (var key in obj) {
    obj[key];
  }
};
```

### Flow

#### Print classes mixins and implements correctly ([#4326](https://github.com/prettier/prettier/pull/4326) by [@existentialism](https://github.com/existentialism))

Before 1.13, Prettier would not print class mixins and "implements" correctly because they weren't exported in Flow's parsed AST. This is now fixed.

<!-- prettier-ignore -->
```js
// Input
declare class A implements B {}
declare class C mixins D {}

// Output with Prettier 1.12
declare class A {}
declare class C {}

// Output with Prettier 1.13
declare class A implements B {}
declare class C mixins D {}
```

### JSON

#### Split JSON and JSON5 ([#4367](https://github.com/prettier/prettier/pull/4367) by [@ikatyang](https://github.com/ikatyang), [#4371](https://github.com/prettier/prettier/pull/4371) by [@ikatyang](https://github.com/ikatyang), [#4333](https://github.com/prettier/prettier/pull/4333) by [@duailibe](https://github.com/duailibe))

JSON5 is a superset of JSON that supports comments, trailing commas and unquoted property keys. This fixes the JSON printing to always print quoted property keys, and print JSON5 property keys the same way as JavaScript.

Also the pragma detection/insertion behavior is more reliable:

* for JSON, we format with pragma or not and never insert a pragma
* for JSON5, we use the same infrastructure JavaScript uses.

#### Added 'json-stringify' parser for JSON.stringify formatting ([#4450](https://github.com/prettier/prettier/pull/4450) by [@ikatyang](https://github.com/ikatyang))

The JSON formatting has several differences from the output of other formatters like `JSON.stringify`. This caused errors when formatting files like `package.json` or `package-lock.json`. We added a new formatter to be able to print JSON more closely to `JSON.stringify`.

### Markdown

#### Change unordered list symbol to hyphen ([#4440](https://github.com/prettier/prettier/pull/4440) by [@ikatyang](https://github.com/ikatyang))

With the release of Markdown support in Prettier, we used [GitHub BigQuery data](https://cloud.google.com/bigquery/public-data/github) and discovered that the `*` symbol was marginally more used than `-` for unordered lists. Since then, we have received massive feedback from the community that the `-` is actually preferred. Prettier 1.13 will now format unordered lists using the `-` symbol.

<!-- prettier-ignore -->
```markdown
<!-- Input -->
* Top level list item 1
* Top level list item 2
  * Nested List item 1
  * Nested List item 2
    * Sub-Nested List item 1
    * Sub-Nested List item 2

<!-- Output with Prettier 1.12.1 -->
* Top level list item 1
* Top level list item 2
  * Nested List item 1
  * Nested List item 2
    * Sub-Nested List item 1
    * Sub-Nested List item 2

<!-- Output with Prettier 1.13 -->
- Top level list item 1
- Top level list item 2
  - Nested List item 1
  - Nested List item 2
    - Sub-Nested List item 1
    - Sub-Nested List item 2
```

#### Preserve Liquid tags contents ([#4484](https://github.com/prettier/prettier/pull/4484) by [@duailibe](https://github.com/duailibe))

In Markdown files with Liquid tags (such as used with Jekyll and other static site generators) Prettier would treat those tags like regular text, and format the contents, which meant it would break those pages. Now Prettier 1.13 will respect those tags and not change its contents.

<!-- prettier-ignore -->
```markdown
<!-- Input -->
{% include_relative _installations/tarball.md %}

{% cloudinary nice_prefix_-_for_the_filename.jpg %}

<!-- Output with Prettier 1.12 -->
{% include_relative \_installations/tarball.md %}

{% cloudinary nice*prefix*-\_for_the_filename.jpg %}

<!-- Output with Prettier 1.13 -->
{% include_relative _installations/tarball.md %}

{% cloudinary nice_prefix_-_for_the_filename.jpg %}

```

#### Break link definitions onto multiple lines when needed ([#3531](https://github.com/prettier/prettier/pull/3531) by [@j-f1](https://github.com/j-f1))

Link definitions will be broken in multiple lines when used with `--prose-wrap always` if they exceed the print width.

<!-- prettier-ignore -->
```markdown
<!-- Input -->
[just-url]: https://example.com
[url-with-short-title]: https://example.com "title"
[url-with-long-title]: https://example.com "a long, long title. It's really really long. Here have words."

[long]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx
[long-with-title]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx "look a title!"

<!-- Output with Prettier 1.12 -->
[just-url]: https://example.com
[url-with-short-title]: https://example.com "title"
[url-with-long-title]: https://example.com "a long, long title. It's really really long. Here have words."
[long]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx
[long-with-title]: https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx "look a title!"

<!-- Output with Prettier 1.13 -->
[just-url]: https://example.com
[url-with-short-title]: https://example.com "title"
[url-with-long-title]:
  https://example.com
  "a long, long title. It's really really long. Here have words."
[long]:
  https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx
[long-with-title]:
  https://example.com/a-long-url/another-segment/yet-another-segment/a-really-long-file-name.php.aspx
  "look a title!"
```

### GraphQL

#### Don't add new lines after unless present in GraphQL ([#4512](https://github.com/prettier/prettier/pull/4512) by [@ad1992](https://github.com/ad1992))

In Prettier 1.12, we would always print a new line between top level definitions. In 1.13 it will stop printing new lines, but will preserve new lines if present in the source.

<!-- prettier-ignore -->
```graphql
# Input
type TypeA {
  fieldA: string
}
type TypeB {
  fieldB: string
}

type TypeC {
  fieldC: string
}

# Output with Prettier 1.12.1
type TypeA {
  fieldA: string
}

type TypeB {
  fieldB: string
}

type TypeC {
  fieldC: string
}

# Output with Prettier 1.13
type TypeA {
  fieldA: string
}
type TypeB {
  fieldB: string
}

type TypeC {
  fieldC: string
}
```

## Other changes

### API/CLI

#### Don't format range if required pragma is missing in the file ([#3996](https://github.com/prettier/prettier/pull/3996) by [@josephfrazier](https://github.com/josephfrazier))

In Prettier 1.12, if a file didn't have a pragma and Prettier was called only for a range with `--require-pragma`, Prettier would format it anyway. Now Prettier will check if the file has the pragma even when only formatting a range.

### JavaScript

#### Apply destructuring rules in functions to catch param ([#4385](https://github.com/prettier/prettier/pull/4385) by [@duailibe](https://github.com/duailibe))

In 1.12 we formatted destructuring in `catch` arguments like destructuring in assignments, when it should be formatted more like function arguments:

<!-- prettier-ignore -->
```js
// Input
try {
  doSomething();
} catch ({data: {message}}) {
  handleError(message.errors);
}

try {
  doSomething();
} catch ({data: {message: {errors}}}) {
  handleError(errors);
}

// Output with Prettier 1.12.1
try {
  doSomething();
} catch ({
  data: { message }
}) {
  handleError(message.errors);
}

try {
  doSomething();
} catch ({
  data: {
    message: { errors }
  }
}) {
  handleError(errors);
}

// Output with Prettier 1.13
try {
  doSomething();
} catch ({ data: { message } }) {
  handleError(message.errors);
}

try {
  doSomething();
} catch ({
  data: {
    message: { errors }
  }
}) {
  handleError(errors);
}
```

#### Escape backslashes correctly for Markdown in JS ([#4381](https://github.com/prettier/prettier/pull/4381) by [@ikatyang](https://github.com/ikatyang))

Prettier 1.12.1 would remove backslashes in Markdown template literals and now 1.13 will print them correctly.

<!-- prettier-ignore -->
```js
// Input
markdown`
  const cssString = css\`
    background-color: \$\{color('base')\}
  \`;
`
// Output with Prettier 1.12.1
markdown`
  const cssString = css\`background-color: ${color('base')}\`;
`;

// Output with Prettier 1.13
markdown`
  const cssString = css\`background-color: \$\{color('base')\}\`;
`;
```

#### Support styled-components Foo.extend.attrs()`` ([#4434](https://github.com/prettier/prettier/pull/4434) by [@duailibe](https://github.com/duailibe))

Prettier now also supports the `Foo.extend.attrs()` syntax of styled-components.

<!-- prettier-ignore -->
```js
// Input
Button.extend.attr({})`
border-color : black;
`;

// Output with Prettier 1.12
Button.extend.attr({})`
border-color : black;
`;

// Output with Prettier 1.13
Button.extend.attr({})`
  border-color: black;
`;
```

#### Added support for the GraphQL comment tag ([#4395](https://github.com/prettier/prettier/pull/4395) by [@tjallingt](https://github.com/tjallingt))

We format GraphQL in tagged template literals but there are GraphQL libraries that use untagged template literals. Editors support syntax highlight prepend the template literal with a `/* GraphQL */` comment, so Prettier now detects that comment and also formats the GraphQL code.

<!-- prettier-ignore -->
```js
// Input
const query = /* GraphQL */`
      {
    user(   id :   5  )  {
      firstName
      lastName
    }
  }
`;

// Output with Prettier 1.13
const query = /* GraphQL */ `
  {
    user(id: 5) {
      firstName
      lastName
    }
  }
`;
```

### Markdown

#### Remove newline in empty .md files ([#4388](https://github.com/prettier/prettier/pull/4388) by [@huyvohcmc](https://github.com/huyvohcmc))

When printing empty Markdown files, Prettier would output a file with two lines. This is now fixed in 1.13.

#### Prevent merge continuous CJK text with `--prose-wrap preserve` ([#4504](https://github.com/prettier/prettier/pull/4504) by [@ikatyang](https://github.com/ikatyang))

When used with `--prose-wrap preserve`, Prettier should not merge continuous CJK text from multiple lines.

<!-- prettier-ignore -->
```markdown
<!-- Input -->
::: warning 注意
该网站在国外无法访问，故以下演示无效
:::

<!-- Output with Prettier 1.12 -->
::: warning 注意该网站在国外无法访问，故以下演示无效
:::

<!-- Output with Prettier 1.13 -->
::: warning 注意
该网站在国外无法访问，故以下演示无效
:::
```

<!-- TODO -->

#### refactor: `less` extend ([#4526](https://github.com/prettier/prettier/pull/4526) by [@evilebottnawi](https://github.com/evilebottnawi))

#### Add spec for multiple items in class attributes in handle bars ([#4509](https://github.com/prettier/prettier/pull/4509) by [@ad1992](https://github.com/ad1992))

#### fix(typescript): preserve quoted class property ([#4517](https://github.com/prettier/prettier/pull/4517) by [@ikatyang](https://github.com/ikatyang))

#### refactor: `value-comma_group` node ([#4501](https://github.com/prettier/prettier/pull/4501) by [@evilebottnawi](https://github.com/evilebottnawi))

#### fix: scss interpolation in string ([#4490](https://github.com/prettier/prettier/pull/4490) by [@evilebottnawi](https://github.com/evilebottnawi))

#### fix: better output scss maps ([#4487](https://github.com/prettier/prettier/pull/4487) by [@evilebottnawi](https://github.com/evilebottnawi))

#### Refactor frontmatter handling ([#4482](https://github.com/prettier/prettier/pull/4482) by [@duailibe](https://github.com/duailibe))

#### update postcss value parser for @import and at rule ([#4435](https://github.com/prettier/prettier/pull/4435) by [@ad1992](https://github.com/ad1992))

#### refactor: `css` language ([#4483](https://github.com/prettier/prettier/pull/4483) by [@evilebottnawi](https://github.com/evilebottnawi))

#### refactor: parser-postcss ([#4478](https://github.com/prettier/prettier/pull/4478) by [@evilebottnawi](https://github.com/evilebottnawi))

#### Wrap ?() => T in parens when needed. ([#4475](https://github.com/prettier/prettier/pull/4475) by [@nicolo-ribaudo](https://github.com/nicolo-ribaudo))

#### fix: characters escaping ([#4472](https://github.com/prettier/prettier/pull/4472) by [@evilebottnawi](https://github.com/evilebottnawi))

#### Improve plugin resolution when path does not start with ./ ([#4451](https://github.com/prettier/prettier/pull/4451) by[@kachkaev](https://github.com/kachkaev))

#### Fix: lazy match the frontmatter in postcss parser ([#4457](https://github.com/prettier/prettier/pull/4457) by [@eliasmeire](https://github.com/eliasmeire))

#### fix: css variables and scss interpolation ([#4471](https://github.com/prettier/prettier/pull/4471) by [@evilebottnawi](https://github.com/evilebottnawi))

#### Fix: Always preserve frontmatter, remove dependency ([#4392](https://github.com/prettier/prettier/pull/4392) by [@eliasmeire](https://github.com/eliasmeire))

#### Fix: Group long name method in bind expressions ([#4447](https://github.com/prettier/prettier/pull/4447) by [@misoguy](https://github.com/misoguy))

#### Fix plugin API in globally installed Prettier and introduce optional --plugin-search-dir ([#4192](https://github.com/prettier/prettier/pull/4192) by [@kachkaev](https://github.com/kachkaev))

#### Fix: Correctly break class property initializers ([#4442](https://github.com/prettier/prettier/pull/4442) by [@nicolo-ribaudo](https://github.com/nicolo-ribaudo))

#### fix(typescript): add missing `qualifier` and `typeof` in TSImportType ([#4438](https://github.com/prettier/prettier/pull/4438) by [@ikatyang](https://github.com/ikatyang))

#### feat(typescript): support TSImportType ([#4429](https://github.com/prettier/prettier/pull/4429) by [@ikatyang](https://github.com/ikatyang))

#### Fix TSMappedType comments ([#4418](https://github.com/prettier/prettier/pull/4418) by [@duailibe](https://github.com/duailibe))

#### Fix cursor offset tracking ([#4397](https://github.com/prettier/prettier/pull/4397) by [@ds300](https://github.com/ds300))

#### Fix trailing JSDoc comments with trailing regular comments ([#4414](https://github.com/prettier/prettier/pull/4414) by[@duailibe](https://github.com/duailibe))

#### Add miniprettier to website and docs ([#4411](https://github.com/prettier/prettier/pull/4411) by [@duailibe](https://github.com/duailibe))

#### Prevent flattening multiplicative operations ([#4407](https://github.com/prettier/prettier/pull/4407) by [@duailibe](https://github.com/duailibe))

#### fix spacing issue in postcss simple vars ([#4408](https://github.com/prettier/prettier/pull/4408) by [@ad1992](https://github.com/ad1992))

#### Wrap modulo operation in parens inside additive operation ([#4413](https://github.com/prettier/prettier/pull/4413) by [@duailibe](https://github.com/duailibe))

#### [playground] fix overflow in safari ([#4406](https://github.com/prettier/prettier/pull/4406) by [@johann-sonntagbauer](https://github.com/johann-sonntagbauer))

#### refactor: remove unused `css-import` node ([#4375](https://github.com/prettier/prettier/pull/4375) by [@evilebottnawi](https://github.com/evilebottnawi))

#### refactor: `printer-postcss` ([#4378](https://github.com/prettier/prettier/pull/4378) by [@evilebottnawi](https://github.com/evilebottnawi))

#### feat: use `postcss-values-parser` for `@namespace` at rule ([#4373](https://github.com/prettier/prettier/pull/4373) by[@evilebottnawi](https://github.com/evilebottnawi))

#### feat: improve `@support` at-rule output ([#4372](https://github.com/prettier/prettier/pull/4372) by [@evilebottnawi](https://github.com/evilebottnawi))

#### feat(typescript): support TaggedTemplateExpression typeParameters ([#4353](https://github.com/prettier/prettier/pull/4353) by [@ikatyang](https://github.com/ikatyang))

#### feat: adding plugin ability for isBlockComment ([#4347](https://github.com/prettier/prettier/pull/4347) by [@mgrip](https://github.com/mgrip))

#### fix(glimmer): preserve leading/trailing spaces in text nodes undernea… ([#4288](https://github.com/prettier/prettier/pull/4288) by [@n8n8baby](https://github.com/n8n8baby))

#### feat(typescript): support generic JSX element ([#4268](https://github.com/prettier/prettier/pull/4268) by [@ikatyang](https://github.com/ikatyang))

#### Allow trailing comma in scss list and maps ([#4317](https://github.com/prettier/prettier/pull/4317) by [@ad1992](https://github.com/ad1992))

#### Improve formatting of TS casts with generics and unions ([#4219](https://github.com/prettier/prettier/pull/4219) by [@kpdonn](https://github.com/kpdonn))
