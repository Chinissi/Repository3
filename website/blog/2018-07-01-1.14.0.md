---
author: Ika (@ikatyang)
authorURL: https://github.com/ikatyang
title: "Prettier 1.14: YAML Support"
---

TODO: update blog post date

This release adds YAML support, pragma (i.e. `/** @prettier */`) support for every language, and improves performance on large files. It also adds support for several new syntax features, and has a few formatting tweaks to make your code even prettier. âœ¨

<!--truncate-->

## Highlights

### YAML

#### Support YAML ([#4563], [#4742], [#4773], [#4854] by [@ikatyang])

You can now format YAML files! ðŸŽ‰

The implementation is highly compliant with the [YAML spec](http://yaml.org/spec/), and backed by the excellent [`yaml`](https://github.com/eemeli/yaml) package thanks to [@eemeli]. A few highlights:

##### Word wrap

Just like in Markdown, weâ€™ll hard-wrap prose at 80-characters if it doesnâ€™t affect the meaning of the file.

Input:

<!-- prettier-ignore -->
```yaml
>
  VoilÃ ! In view, a humble vaudevillian veteran cast vicariously as both victim and villain by the vicissitudes of Fate. This visage, no mere veneer of vanity, is a vestige of the vox populi, now vacant, vanished. However, this valourous visitation of a bygone vexation stands vivified and has vowed to vanquish these venal and virulent vermin vanguarding vice and vouchsafing the violently vicious and voracious violation of volition! The only verdict is vengeance; a vendetta held as a votive, not in vain, for the value and veracity of such shall one day vindicate the vigilant and the virtuous. Verily, this vichyssoise of verbiage veers most verbose, so let me simply add that it's my very good honour to meet you and you may call me V.
```

Output: (`--prose-wrap always`)

<!-- prettier-ignore -->
```yaml
>
  VoilÃ ! In view, a humble vaudevillian veteran cast vicariously as both victim
  and villain by the vicissitudes of Fate. This visage, no mere veneer of
  vanity, is a vestige of the vox populi, now vacant, vanished. However, this
  valourous visitation of a bygone vexation stands vivified and has vowed to
  vanquish these venal and virulent vermin vanguarding vice and vouchsafing the
  violently vicious and voracious violation of volition! The only verdict is
  vengeance; a vendetta held as a votive, not in vain, for the value and
  veracity of such shall one day vindicate the vigilant and the virtuous.
  Verily, this vichyssoise of verbiage veers most verbose, so let me simply add
  that it's my very good honour to meet you and you may call me V.
```

> Note: the [`proseWrap`](https://prettier.io/docs/en/options.html#prose-wrap) option is set to `preserve` by default so you'll have to specify `always` or `never` to enable this feature.

##### Ignore a portion of the file

For some reason you donâ€™t want to format part of the YAML file you can always put an ignore comment before it:

<!-- prettier-ignore -->
```yaml
# prettier-ignore
key  : value
hello: world
```

### Front Matter

#### Format YAML front matter ([#4773] by [@ikatyang])

Prettier can now format `---`-delimited YAML front matter in CSS and Markdown files:

<!-- prettier-ignore -->
```css
---
key: value
---

.class {
  display: block;
}
```

<!-- prettier-ignore -->
```md
---
key: value
---

# heading

content
```

### Pragma

#### Support `requirePragma`/`insertPragma` in every language ([#4688], [#4699], [#4713] by [@ikatyang])

Prettier 1.7.0 and 1.8.0 introduced two new options,
[`--require-pragma`](https://prettier.io/docs/en/options.html#require-pragma) and
[`--insert-pragma`](https://prettier.io/docs/en/options.html#insert-pragma).
However, these options were only supported in a few languages.
Now these options are available in every language, including YAML!

- YAML

  <!-- prettier-ignore -->
  ```yaml
  # @prettier

  key: value
  ```

- CSS/Less/SCSS

  <!-- prettier-ignore -->
  ```css
  /** @prettier */

  .class {
    display: none;
  }
  ```

- GraphQL

  <!-- prettier-ignore -->
  ```gql
  # @prettier

  query Browse($offset: Int) {
    browse(offset: $offset)
  }
  ```

- Vue

  <!-- prettier-ignore -->
  ```html
  <!-- @prettier -->

  <template>
    <div>Template</div>
  </template>
  ```

### JSON

#### Do not put values on a separate line from the key ([#4852] by [@ikatyang])

Putting long values on new rows is the core feature of Prettier,
but we found that it won't improve readability for string value in object in JSON files,
the long values being put onto new rows would still not fit the print width in most of the time.
In Prettier 1.14, string values in object won't be extended to the next line in JSON files no matter it fits the print width or not.

<!-- prettier-ignore -->
```json5
// Input
{
  "description": "a long long long long long long long long long long long long long long long long long paragraph"
}

// Output (Prettier 1.13)
{
  "description":
    "a long long long long long long long long long long long long long long long long long paragraph"
}

// Output (Prettier 1.14)
{
  "description": "a long long long long long long long long long long long long long long long long long paragraph"
}
```

### Performance

#### Performance improvement on big files ([#4790], [#4848] by [@sompylasar])

TODO

## Other changes

### API/CLI

#### Support relative paths for `plugins` and `plusinSearchDirs` in config files ([#4667] by [@ikatyang])

In the prior version, we introduced a new option `pluginSearchDirs` to determine where to find plugins,
it works well when it's specified in the CLI since it's always relative to `cwd` but it's not the case for config files.
In Prettier 1.14, relative paths for `pluginSearchDirs` and `plugins` in config files are now supported.

#### Do not throw error if `prettier` installed in a directory not named `prettier` ([#4706] by [@asottile])

We added the support for global installed plugins in Prettier 1.13 by
searching up the fs tree to find the nearest `node_modules` from `prettier`,
we thought that there should be always a `prettier` directory so we didn't check its existence,
this introduced a bug that you'll get an error if your Prettier is not placed in a directory named `prettier`.
We changed our searching logic in Prettier 1.14 so you should be able to place it everywhere.

#### Support `filepath` in browser ([#4721] by [@ikatyang])

In the prior version, we added the first-class support for running Prettier in the browser,
but the only way to choose which parser to use is by using the `parser` option,
it'd be better to also have the ability to infer parser from `filepath` just like the Node.js API.
Prettier 1.14 adds `filepath` support for the browser API, it should be useful for web editor applications.

#### Expose `isPreviousLineEmpty` to plugins (#4747) ([#4748] by [@warrenseine])

TODO

### JavaScript

#### Support BigInt literals ([#4697] by [@ikatyang])

[BigInt](https://github.com/tc39/proposal-bigint) is now supported in the `babylon` parser.

<!-- prettier-ignore -->
```js
const bigInt = 1n;
```

#### Support `throw` expressions ([#4695] by [@VojtechStep])

[Throw expression](https://github.com/tc39/proposal-throw-expressions) is now supported in the `babylon` parser.

<!-- prettier-ignore -->
```js
const assert = x => x || throw new Error('...');
```

#### Break JSX in arrow functions in JSX expressions ([#4601] by [@duailibe])

TODO

#### Always expand first argument if the second argument is also a call expression ([#4657] by [@duailibe])

TODO

#### Handle JSX whitespace separately from fbt whitespace ([#4717] by [@karl])

TODO

#### Add parens for await in bind ([#4778] by [@ikatyang])

In the prior version, Prettier wrongly removed the necessary parentheses for `await` in bind,
which causes its meaning to be different. Prettier 1.14 preserves the parentheses correctly.

<!-- prettier-ignore -->
```js
// Input
const doBothThings = async () => {
    const request = doAsyncThing();
    return (await request)::doSyncThing();
};

// Output (Prettier 1.13)
const doBothThings = async () => {
    const request = doAsyncThing();
    return await request::doSyncThing(); // different meaning
};

// Output (Prettier 1.14)
const doBothThings = async () => {
    const request = doAsyncThing();
    return (await request)::doSyncThing();
};
```

#### Allow top level `super` and `await` ([#4823] by [@ikatyang])

`super` and `await` are not allowed to be in places other than classes and async functions respectively,
but it's a valid use case when it comes to [range format](https://prettier.io/docs/en/options.html#range).
Prettier 1.14 allows them to be everywhere.

<!-- prettier-ignore -->
```js
super();

await doSomething();
```

#### Blacklist `this` in functional composition heuristics ([#4836] by [@princed])

TODO

### TypeScript

#### Support TypeScript 3.0 ([#4625], [#4757] by [@ikatyang])

A few new features with new syntaxes are added in the upcoming TypeScript 3.0:
[`unknown` type](https://github.com/Microsoft/TypeScript/pull/24439) and
[tuples in rest parameters and spread expressions](https://github.com/Microsoft/TypeScript/pull/24897).
Prettier 1.14 adds support for them so you can format them when they got released.

<!-- prettier-ignore -->
```ts
// UnknownType
const json: unknown = JSON.parse(jsonText);

// RestType
type Foo = [string, number];
type Bar = [boolean, ...Foo];

// OptionalType
type Baz = [string, number?];
```

#### Support `import.meta` ([#4762] by [@ikatyang])

In Prettier 1.13, the version of the TypeScript parser we used did not support parsing the `importMeta` syntax.
We updated our TypeScript parser in Prettier 1.14 so they are now parsed and formatted correctly.

<!-- prettier-ignore -->
```js
console.log(import.meta.url);
```

#### Optional property with StringLiteral key in class ([#4762] by [@ikatyang])

In the prior version, the question token in optional property with `StringLiteral` is wrongly removed.
We fixed this bug in Prettier 1.14 so they won't be removed again.

<!-- prettier-ignore -->
```ts
// Input
export class ClassExample {
  "a-prop"?: boolean;
}

// Output (Prettier 1.13)
export class ClassExample {
  "a-prop": boolean;
}

// Output (Prettier 1.14)
export class ClassExample {
  "a-prop"?: boolean;
}
```

#### Throw error on mutiple super classes in class ([#4762] by [@ikatyang])

Classes are only allowed to have one parent class
but the TypeScript AST allows them to be multiple
since the `extends` clause shared the same structure with the `implements` clause.
Previously, extra super classes are lost in the AST transformation
so you might be confused why they are removed after formatting.
In Prettier 1.14, they are makred as syntax errors
so that you'll notice that it's an invalid usage instead of being confused again.

<!-- prettier-ignore -->
```ts
// Input
class Foo extends BarComponent, BazService, QuuxProvider {}

// Output (Prettier 1.13)
class Foo extends BarComponent {}

// Output (Prettier 1.14)
/*
  SyntaxError: Classes can only extend a single class.
*/
```

### Flow

#### Support `.js.flow` extension ([#4777] by [@ikatyang])

[`.js.flow`](https://flow.org/en/docs/libdefs/creation/#toc-declaring-a-module)
is the extension for Flow declaration files but previously we didn't recognize it.
In Prettier 1.14, they should be picked up automatically
so you don't need to add `overrides` for them in config files.

### CSS/Less/SCSS

#### Handle newline between front-matter and comment correctly ([#4701] by [@evilebottnawi])

Newlines between front matter and comment are replaced with a whitespace in the prior version.
In Prettier 1.14, we force printing a newline between them.

<!-- prettier-ignore -->
```css
/* Input */
---
key: value
---

/* comment */
.class {
  display: none;
}

/* Output (Prettier 1.13) */
---
key: value
---
 /* comment */
.class {
  display: none;
}

/* Output (Prettier 1.14) */
---
key: value
---

/* comment */
.class {
  display: none;
}
```

#### Support at-rule ends with right curly bracket ([#4733] by [@davidgomes])

TODO

<!-- prettier-ignore -->
```scss
/* Input */
@mixin placeholder {
    &::placeholder {@content}
}

/* Output (Prettier 1.13) */
/*
  SyntaxError: CssSyntaxError Unclosed block
*/

/* Output (Prettier 1.14) */
@mixin placeholder {
  &::placeholder {
    @content;
  }
}
```

### Markdown

#### Preserve email autolink ([#4740] by [@ikatyang])

Autolinks are formatted as their url in the prior version, which is fine.
But there's a special case for email links that they'll be resolved as `mailto:` links.
In Prettier 1.14, email autolinks are preserved.

<!-- prettier-ignore -->
```md
<!-- Input -->
<hello@example.com>

<!-- Output (Prettier 1.13) -->
<mailto:hello@example.com>

<!-- Output (Prettier 1.13) -->
<hello@example.com>
```

#### Do not require space after markdown block language name ([#4783] by [@kachkaev])

In Prettier 1.12, we added the support for fenced codeblock lang followed by attributes,
which requires them to be separated by whitespaces.
But this introduced the inconsistency for codeblock highlighting in Atom that
codeblocks are hightlighted but we do not format them.
We updated our detection logic in Prettier 1.14 so they should behave the same now.

<!-- prettier-ignore -->
````md
<!-- Input -->
```js{something=something}
const x   =   1;
```

<!-- Output (Prettier 1.13) -->
```js{something=something}
const x   =   1;
```

<!-- Output (Prettier 1.14) -->
```js{something=something}
const x = 1;
```
````

#### Use aliases from language to find parser for markdown codeblock ([#4734] by [@ikatyang])

TODO

<!-- prettier-ignore -->
````md
<!-- Input -->
```jsonc
// comment
{"a":1}
```

<!-- Output (Prettier 1.13) -->
```jsonc
// comment
{"a":1}
```

<!-- Output (Prettier 1.14) -->
```jsonc
// comment
{ "a": 1 }
```
````

#### Preserve entity for encoded character that's in form of surrogate pair ([#4832] by [@ikatyang])

TODO

<!-- prettier-ignore -->
````md
<!-- Input -->
&#x1F609;

<!-- Output (Prettier 1.13) -->
ðŸ˜‰

<!-- Output (Prettier 1.14) -->
&#x1F609;
````

### GraphQL

#### Preserve linebreak in non-block stringValue ([#4808] by [@ikatyang])

TODO

<!-- prettier-ignore -->
```gql
# Input
{
  foo(input: {multiline: "ab\ncd"}) { id }
}

# Output (Prettier 1.13)
{
  foo(input: { multiline: "ab
cd" }) {
    id
  }
}

# Output (Prettier 1.14)
{
  foo(input: { multiline: "ab\ncd" }) {
    id
  }
}
```

[@asottile]: https://github.com/asottile
[@davidgomes]: https://github.com/davidgomes
[@duailibe]: https://github.com/duailibe
[@eemeli]: https://github.com/eemeli
[@evilebottnawi]: https://github.com/evilebottnawi
[@ikatyang]: https://github.com/ikatyang
[@kachkaev]: https://github.com/kachkaev
[@karl]: https://github.com/karl
[@princed]: https://github.com/princed
[@sompylasar]: https://github.com/sompylasar
[@vojtechstep]: https://github.com/VojtechStep
[@warrenseine]: https://github.com/warrenseine
[#4563]: https://github.com/prettier/prettier/pull/4563
[#4601]: https://github.com/prettier/prettier/pull/4601
[#4625]: https://github.com/prettier/prettier/pull/4625
[#4657]: https://github.com/prettier/prettier/pull/4657
[#4667]: https://github.com/prettier/prettier/pull/4667
[#4688]: https://github.com/prettier/prettier/pull/4688
[#4695]: https://github.com/prettier/prettier/pull/4695
[#4697]: https://github.com/prettier/prettier/pull/4697
[#4699]: https://github.com/prettier/prettier/pull/4699
[#4701]: https://github.com/prettier/prettier/pull/4701
[#4706]: https://github.com/prettier/prettier/pull/4706
[#4713]: https://github.com/prettier/prettier/pull/4713
[#4717]: https://github.com/prettier/prettier/pull/4717
[#4721]: https://github.com/prettier/prettier/pull/4721
[#4733]: https://github.com/prettier/prettier/pull/4733
[#4734]: https://github.com/prettier/prettier/pull/4734
[#4740]: https://github.com/prettier/prettier/pull/4740
[#4742]: https://github.com/prettier/prettier/pull/4742
[#4748]: https://github.com/prettier/prettier/pull/4748
[#4757]: https://github.com/prettier/prettier/pull/4757
[#4762]: https://github.com/prettier/prettier/pull/4762
[#4773]: https://github.com/prettier/prettier/pull/4773
[#4777]: https://github.com/prettier/prettier/pull/4777
[#4778]: https://github.com/prettier/prettier/pull/4778
[#4783]: https://github.com/prettier/prettier/pull/4783
[#4790]: https://github.com/prettier/prettier/pull/4790
[#4808]: https://github.com/prettier/prettier/pull/4808
[#4823]: https://github.com/prettier/prettier/pull/4823
[#4832]: https://github.com/prettier/prettier/pull/4832
[#4836]: https://github.com/prettier/prettier/pull/4836
[#4848]: https://github.com/prettier/prettier/pull/4848
[#4852]: https://github.com/prettier/prettier/pull/4852
[#4854]: https://github.com/prettier/prettier/pull/4854
